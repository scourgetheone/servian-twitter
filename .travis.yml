matrix:
    include:
        # - language: python
        #   python: 3.7
        #   before_script:
        #     - cd backend/tests
        #   script:
        #     - python -m unittest discover

      - language: node_js
        node_js: 13
        cache: yarn
        before_script:
          - cd ui
        script:
          - yarn install
          - bash ../build_ui.sh

before_deploy:
- cd ../
- openssl aes-256-cbc -K $encrypted_645f850629f0_key -iv $encrypted_645f850629f0_iv
  -in hazel-tome-269200-2c4a7c4121d6.json.enc -out hazel-tome-269200-2c4a7c4121d6.json
  -d

deploy:
    provider: gae
    keyfile: "hazel-tome-269200-2c4a7c4121d6.json"
    project: "hazel-tome-269200"
